{% extends "common/base.html" %} 
{% load crispy_forms_tags %}
{% load humanize %}
{% load static %}


{% block content %}
<script>
    // From https://ourcodeworld.com/articles/read/189/how-to-create-a-file-and-generate-a-download-with-javascript-in-the-browser-without-a-server
    function download(filename, text)
    {
        var element = document.createElement('a');
        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
        element.setAttribute('download', filename);

        element.style.display = 'none';
        document.body.appendChild(element);

        element.click();

        document.body.removeChild(element);
    }

    $(document).ready(function()
    {
        // There is some risk of HTML/JS injection
        // here. Might want to do this in Python?
        // var data = " export_data|safe ";
        // console.log(data);
        
        // download("project.json", data);

        self.close();
    });
</script>

{% endblock %}